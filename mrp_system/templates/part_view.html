{% extends "base2.html" %}

<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
{% block title %}Parts{% endblock title %}
{% block crumbs %}
    {{ block.super }}
    <li><span class="divider">/</span> <a href="{% url 'list_parts' partType.id %}">Parts</a></li>
{% endblock crumbs %}
{% block content %}
{% if manu_formset.non_form_errors %}
        {% for error in manu_formset.non_form_errors %}
            <p><font color="red"><big>{{ error }}</big></font> </p>
        {% endfor %}
    {% endif %}
<div class="container-fluid">
<h3> {{ partType }}</h3>

 <a style=" padding:3px; display: block;
    width: 115px;
    height: 25px;
    background: #007bff;
    padding: 7px;
    text-align: center;
    border-radius: 5px;
    color: white;
    font-weight: bold;" href="{% url 'edit_part' partType.id part.id %}">Edit</a>
<br><br>
<div class="form-horizontal" >
<form action="" method="post" enctype='multipart/form-data' style="display:table;"> {% csrf_token %}

<div class="w3-container">

<table>

 {% for field in view_part_form %}
<!--{{ part_form.as_p }}-->
<tr class="group">

           <td>  {{ field.label_tag }} </td>
        <td> {{field}} </td>

</tr>&nbsp;&nbsp;
  {% endfor %}
    <br>


</table>
</div>

<div class="w3-container" style="margin-left:8px">
{{ location_formset.management_form }}
<div id="formset">
    <label style="font-weight:bold; padding-right:65px; ">Location:</label>
    <label style="border-style:ridge; padding:5px;">{% for loc in part.get_location %}{{ loc }}</br>{% endfor %}</label>

<br>
    <label style="font-weight:bold; padding-right:91px;"> Stock</label>
    <label style="border-style:ridge; padding-right:0px; padding-left:0px; padding-top:2px;
padding-bottom:2px;">{% if part.get_stock %}
        {% for stock in part.get_stock %}{{ stock.stock }}
        {% endfor %}
    {% endif %}</label>
</div>
    <br>
<!--<input type="button" value="Add Location" id="addmore">-->

    <br>
<div id="emptyform" style="display:none">
    <table class='no_error'>
        {{ location_formset.empty_form.as_table }}
    </table>
</div>
<script>
    $('#addmore').click(function() {
         var formidx = $('#id_locationrelationship_set-TOTAL_FORMS').val();
        $('#formset').append($('#emptyform').html().replace(/__prefix__/g, formidx));

        $('#id_locationrelationship_set-TOTAL_FORMS').val(parseInt(formidx) + 1);
    });
</script>

{{ manu_formset.management_form }}
<div id="form_set">

    <label style="font-weight:bold; padding-right:23px; ">Manufacturer:</label>
    <label style="border-style:ridge; padding:5px;">{% for manu in part.get_manufacturers %}{{ manu }}</br>{% endfor %}</label>
    <br>
    <label style="font-weight:bold; padding-right:30px;">Part Number:</label>
    <label style="border-style:ridge; padding:6px;">{% for number in part.get_related %}{{ number }}</br>{% endfor %}</label>
</div>
<!--<input type="button" value="Add" id="add_more">-->
<div id="empty_form" style="display:none">
    <table class='no_error'>
        {{ manu_formset.empty_form.as_table }}
    </table>
</div>
<script>
    $('#add_more').click(function() {
         var form_idx = $('#id_manufacturerrelationship_set-TOTAL_FORMS').val();
        $('#form_set').append($('#empty_form').html().replace(/__prefix__/g, form_idx));

        $('#id_manufacturerrelationship_set-TOTAL_FORMS').val(parseInt(form_idx) + 1);
    });
</script>
<br><br>

    </div>

</form>

</div>
<hr/>
        </div>
{% endblock content %}

